# Copyright (c) 2017 Benjamin Drung <benjamin.drung@profitbricks.com>
# Licensed under BSD (MIT variant) or GPLv2. See COPYING.

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS}")

install(FILES rdma.conf DESTINATION "${CMAKE_INSTALL_SYSCONFDIR}/rdma/"
  PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ)

rdma_subst_install(FILES "rdma-init-kernel.in"
  DESTINATION "${CMAKE_INSTALL_FULL_LIBEXECDIR}"
  RENAME "rdma-init-kernel"
  PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ OWNER_EXECUTE GROUP_EXECUTE WORLD_EXECUTE)

install(FILES "rdma.udev-rules"
  DESTINATION "${CMAKE_INSTALL_UDEV_RULESDIR}"
  RENAME "98-rdma.rules"
  PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ)

rdma_subst_install(FILES "rdma.service.in"
  DESTINATION "${CMAKE_INSTALL_SYSTEMD_SERVICEDIR}"
  RENAME "rdma.service"
  PERMISSIONS OWNER_WRITE OWNER_READ GROUP_READ WORLD_READ)
